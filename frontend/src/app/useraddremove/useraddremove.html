<div class="dashboard-wrapper">

<!-- Topbar menu button for small screens -->
<div class="topbar-menu">
  <span class="topbar-logo">SpareFlow</span>
  <button (click)="toggleDropdown()" class="menu-btn">&#9776; Menu</button>
  <ul class="dropdown-menu" [class.show]="dropdownVisible">
    <li><a routerLink="/dashboard">Dashboard</a></li>
    <li><a routerLink="/item" routerLinkActive="active">Item</a></li>
    <li><a routerLink="/history">History</a></li>
    <li><a routerLink="/attachment">Attachment</a></li>
    <li><a routerLink="/itemadd">Item Add</a></li>
    <li><a class="active">User Add/Remove</a></li>
    <li><a (click)="goBack()" style="cursor:pointer;">Back</a></li>
    <li><a (click)="logout()" style="cursor:pointer;">Logout</a></li>
  </ul>
</div>

  <!-- Sidebar -->
  <aside class="sidebar" [class.show]="sidebarVisible">
    <div class="logo">SpareFlow </div>
    <nav>
      <ul>
        <li><a routerLink="/dashboard">Dashboard</a></li>
        <li><a routerLink="/item">Item</a></li>
        <li><a routerLink="/history">History</a></li>
        <li><a routerLink="/attachment">Attachment</a></li>
        <li><a routerLink="/itemadd">Item Add</a></li>
        <li><a class="active">User Add/Remove</a></li>
        <li><a (click)="goBack()" style="cursor:pointer;">Back</a></li>
        <li><a (click)="logout()" style="cursor:pointer;">Logout</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="main-content">
    <h1>User Add/Remove</h1>
    <p><strong>Logged in as: {{ username }}</strong></p>

    <!-- Add User Form -->
    <form (ngSubmit)="addUser()" class="user-form">
      <div class="form-group">
        <label>Username: </label>
        <input type="text" [(ngModel)]="newUser.username" name="username" required />
      </div>

      <div class="form-group">
        <label>Password: </label>
        <input type="password" [(ngModel)]="newUser.password" name="password" required />
      </div>

      <div class="form-group">
        <label>Role </label>
        <select [(ngModel)]="newUser.role" name="role" required>
          <option value="sales">Sales</option>
          <option value="cashier">Cashier</option>
          <option value="admin">Admin</option>
        </select>
      </div>

      <button type="submit" class="add-btn">Add User</button>
    </form>

    <!-- User Table -->
    <div class="table-container">
      <h2>Existing Users</h2>
      <table *ngIf="users.length > 0; else emptyUsers">
        <thead>
          <tr>
            <th>Username</th>
            <th>Password</th>
            <th>Role</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users; let i = index">
            <td>{{ user.username }}</td>
            <td>{{ user.password }}</td>
            <td>{{ user.role }}</td>
            <td>
              <button class="delete-btn" (click)="deleteUser(i)">üóëÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>

      <ng-template #emptyUsers>
        <p class="empty-message">No users added yet.</p>
      </ng-template>
    </div>
  </main>
</div>
